<%- include('../partials/header') %>

<div class="dashboard-layout">
  <main class="dashboard-main">
    <h1>User Feedback and Suggestions</h1>

    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
      <thead>
        <tr style="background-color: #f2f2f2;">
          <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Date</th>
          <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Name</th>
          <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Type</th>
          <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Message</th>
          <th class="no-print" style="padding: 10px; border: 1px solid #ddd; text-align: left;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if(typeof feedbacks !== 'undefined' && feedbacks.length > 0) { %>
          <% feedbacks.forEach(fb => { %>
            <tr>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= new Date(fb.created_at).toLocaleString() %></td>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= fb.name || 'N/A' %></td>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= fb.feedback_type %></td>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= fb.message %></td>
              <td class="no-print" style="padding: 10px; border: 1px solid #ddd;">
                <form action="/admin/feedbacks/delete/<%= fb.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this feedback?');">
                  <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Delete</button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="5" style="padding: 10px; border: 1px solid #ddd; text-align: center;">No feedback has been submitted yet.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </main>

  <%- include('../partials/admin-sidebar') %>
</div>

<%- include('../partials/footer') %>
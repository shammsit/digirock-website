<%- include('../partials/header') %>

<div class="dashboard-layout">
  <main class="dashboard-main">
    <h1>Manage Access Requests</h1>
    <p>Review and approve or deny access requests from other administrators.</p>

    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
      <thead>
        <tr style="background-color: #f2f2f2;">
          <th style="padding: 10px; border: 1px solid #ddd;">Admin Name</th>
          <th style="padding: 10px; border: 1px solid #ddd;">Requested Section</th>
          <th style="padding: 10px; border: 1px solid #ddd;">Date</th>
          <th style="padding: 10px; border: 1px solid #ddd;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if(typeof requests !== 'undefined' && requests.length > 0) { %>
          <% requests.forEach(request => { %>
            <tr>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= request.admin_name %></td>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= request.requested_section %></td>
              <td style="padding: 10px; border: 1px solid #ddd;"><%= new Date(request.created_at).toLocaleString() %></td>
              <td style="padding: 10px; border: 1px solid #ddd; display: flex; gap: 10px;">
                <form action="/admin/approve-request/<%= request.id %>" method="POST" style="margin: 0;">
                  <button type="submit" style="background-color: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Approve</button>
                </form>
                <form action="/admin/deny-request/<%= request.id %>" method="POST" style="margin: 0;">
                  <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Deny</button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="4" style="padding: 10px; border: 1px solid #ddd; text-align: center;">There are no pending access requests.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </main>

  <%- include('../partials/admin-sidebar') %>
</div>

<%- include('../partials/footer') %>
